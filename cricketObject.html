<!DOCTYPE html>
<html lang="en">
<head>
  <title>Document</title>
  <style>
   body{
    text-align: center;
   }
  </style>
</head>
<body>
  <h1>Bat Ball Stump Game</h1>
  
  <button onclick=" 
  let computerChoice= generateComputerChoice();

  let resultMsg =getResult('Bat',computerChoice);

  showResult('Bat',computerChoice,resultMsg);"
    > Bat</button>

<button onclick=" computerChoice= generateComputerChoice();

 resultMsg =getResult('Bat',computerChoice);

showResult('Bat',computerChoice,resultMsg);"
  > Ball</button>
<button onclick=" computerChoice= generateComputerChoice();

 resultMsg =getResult('Bat',computerChoice);

showResult('Bat',computerChoice,resultMsg);"
  > stump</button>
  
  <button onclick="localStorage.clear();
      score={
       win:0,
       lost:0,
       tie:0,}">Reset</button>
 

  <script>

    // let scoreStr=localStorage.getItem('score');
    // let score;
    // if(scoreStr !==undefined){
    //   score=JSON.parse(scoreStr);
    // } else{
      // score={
      
      // win:0,
      // lost:0,
      // tie:0,     
      // };
    // }
    let score={
      
        win:0,
        lost:0,
        tie:0, 
        
        };
    let scoreStr=localStorage.getItem('score');
    reSetScore();

    function reSetScore(scoreStr){
     score=scoreStr ? JSON.parse(scoreStr) : {
      win:0,
      lost:0,
      tie:0,     
        };
      
      score.displayScore = function(){
       return `Won:${score.win}, lost:${score.lost} , tie:${score.tie} ` };
       
    }
  function generateComputerChoice()
  {
  let randomNumber =Math.random()*3;
  if(randomNumber > 0 && randomNumber <= 1)
  {
     return 'Bat';
  }
    else if(randomNumber > 1 && randomNumber < 2){
       return 'Ball';
    }else{
     return 'stump';
    }
  //console.log(`Computer Choice is ${computerChoice}`);
  }
  
  function getResult(userMove,computerMove){
   if (userMove==='Bat'){
    if(computerMove==='Ball'){
      score.win++;
      return 'User has won';
    }
    else if(computerMove==='stump'){
      score.lost++;
      return 'Computer has won';
    }
    else if(computerMove==='Bat'){
      score.tie++;
      return 'Tie';
    }
  } else if(userMove==='Ball'){
    if(computerMove==='stump'){
      score.win++;
      return 'User has won';
    }
    else if(computerMove==='Bat'){
      score.lost++;
      return 'Computer has won';
    }
    else if(computerMove==='Ball'){
      score.tie++;
      return 'Tie';
    }

  } else if(userMove==='Stump'){
    if(computerMove==='Bat'){
      score.win++;
      return 'User has won';
    }
    else if(computerMove==='Ball'){
      score.lost++;
      return 'Computer has won';
    }
    else if(computerMove==='Stump'){
      score.tie++;
      return 'Tie';
    }

  } 

}
function showResult(userMove,computerMove,result)
{
  localStorage.setItem('score',JSON.stringify(score));
  //console.log(score);
  alert(`You have chosen ${userMove}. Computer choice is ${computerMove} 
   ${result}
   ${score.displayScore()} `);
    
}




  </script>

</body>
</html>
